<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Android," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="基本 APIonAttach()             添加到 Activity 中会回调，只调用一次
onCreate()             创建 Fragment 时回调，只调用一次
onCreateView()         每次创建，绘制该 Fragment 的 View 时回调，将显示的 View 返回
onActivityCreate()
onStart()">
<meta property="og:type" content="article">
<meta property="og:title" content="Fragment">
<meta property="og:url" content="http://jslancer.top/2016/10/03/Fragment/index.html">
<meta property="og:site_name" content="jsLancer的博客">
<meta property="og:description" content="基本 APIonAttach()             添加到 Activity 中会回调，只调用一次
onCreate()             创建 Fragment 时回调，只调用一次
onCreateView()         每次创建，绘制该 Fragment 的 View 时回调，将显示的 View 返回
onActivityCreate()
onStart()">
<meta property="og:updated_time" content="2017-02-06T11:57:28.385Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fragment">
<meta name="twitter:description" content="基本 APIonAttach()             添加到 Activity 中会回调，只调用一次
onCreate()             创建 Fragment 时回调，只调用一次
onCreateView()         每次创建，绘制该 Fragment 的 View 时回调，将显示的 View 返回
onActivityCreate()
onStart()">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jslancer.top/2016/10/03/Fragment/"/>





  <title> Fragment | jsLancer的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jsLancer的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">笔记分享</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://jslancer.top/2016/10/03/Fragment/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="光与风与梦">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/icon.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="jsLancer的博客">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="jsLancer的博客" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Fragment
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-03T20:41:08+08:00">
                2016-10-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/10/03/Fragment/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/03/Fragment/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h5 id="基本-API"><a href="#基本-API" class="headerlink" title="基本 API"></a>基本 API</h5><pre><code>onAttach()             添加到 Activity 中会回调，只调用一次
onCreate()             创建 Fragment 时回调，只调用一次
onCreateView()         每次创建，绘制该 Fragment 的 View 时回调，将显示的 View 返回
onActivityCreate()
onStart()             启动 Fragment 时回调
onResume()             恢复 Fragment 时回调
onPause()             暂停 Fragment 时被调用
onStop()             停止 Fragment 时被调用
onDestroyView()     销毁 Fragment 所包含组件时使用
onDestroy()            销毁 Fragment 时被调用
onDetach()             该Fragment 从 Activity 被删除/替换完成后回调，只调用一次
</code></pre><a id="more"></a>
<h5 id="子类"><a href="#子类" class="headerlink" title="子类"></a>子类</h5><pre><code>DiaogFragment
ListFragment
PreferenceFragment
WebViewFragment
</code></pre><p>静态加载 Fragment</p>
<pre><code>1.定义 Fragment xml 布局
2.自定义 Fragment 类，继承 Fragment 类或其子类，实现 onCreateView() 方法
通过 inflater.inflate 加载布局，返回 view
3.&lt;fragment
    android:id=&quot;@+id/fragment&quot;
    android:name=&quot;com.jay.example.fragmentdemo.Fragmentone&quot;  //全限定类名
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; /&gt;
4.Activity 调用 setContentView() 加载布局文件
</code></pre><p>动态加载</p>
<pre><code>1.获得 FragmentManager 对象

FragmentManager manager = getFragmentManager();
FragmentManager manager = getSupportFragmentManager();   //v4包

2.获得 FragmentTransaction 对象

manager.beginTransaction();

3.调用 add() 方法或者 replace() 方法加载 Fragment

add(要传入的容器, fragment 对象);

4.调用 commit() 提交事务
</code></pre><p>Fragment 管理</p>
<pre><code>Activity 管理 Fragment 主要依靠 FragmentManager 调用 findFragmentById() 获取
指定 fragment(静态加载)；
调用 popBackStack() 方法弹出后台 Fragment；
调用 addToBackStack(null) 加入栈
或者监听后台栈的变化 addOnBackStackChangeListener
</code></pre><p>Fragment 与 Activity 交互</p>
<pre><code>组件获取
    1.Fragment 获取 Activity 中组件

    getActivity().findViewById(R.id.xxx);
    getActivity().findFragmentByTag(tag);

    2.Activity 获取 Fragment 中组件

    getFragmentManager.findFragmentById(R.id.fragment);

数据传递 

    1.Activity 传递数据给 Fragment 

    在 Activity 中创建 Bundle 数据包，调用 Fragment 实例的 
    setArguments(bundle)，从而将 Bundle 数据包传给 Fragment

    2.Fragment 传递数据给 Activity 

    在 Fragment 中定义一个内部回调接口，再让包含该 Fragment 的 
    Activity 实现该回调接口，Fragment 就可以通过回调方法传数据了
</code></pre><p>生命周期</p>
<pre><code>1.Activity加载Fragment的时候,依次调用下面的方法: onAttach -&gt; onCreate -&gt; onCreateView -&gt;
 onActivityCreated -&gt; onStart -&gt;onResume

2.当我们弄出一个悬浮的对话框风格的Activity,或者其他,就是让 Fragment 所在的Activity可见,
但不获得焦点 onPause

3.当对话框关闭,Activity又获得了焦点: onResume

4.当我们替换Fragment,并调用addToBackStack()将他添加到Back栈中 onPause -&gt; onStop -&gt; onDestoryView 
注意,此时的Fragment还没有被销毁!!!

5.当我们按下键盘的回退键，Fragment会再次显示出来: onCreateView -&gt; onActivityCreated -&gt; onStart -&gt; onResume

6.如果我们替换后,在事务commit之前没有调用addToBackStack()方法将 Fragment添加到back栈中的话;
又或者退出了Activity的话,那么Fragment将会被完全结束, Fragment会进入销毁状态 onPause -&gt; onStop -&gt; 
onDestoryView -&gt; onDestory -&gt; onDetach
</code></pre><p>向操作栏添加项目</p>
<pre><code>通过实现 onCreateOptionsMenu() 向 Activity 的选项菜单（并因此向操作栏）贡献菜单项。
不过，为了使此方法能够收到调用，您必须在 onCreate() 期间调用 setHasOptionsMenu()，
以指示片段想要向选项菜单添加菜单项（否则，片段将不会收到对 onCreateOptionsMenu() 的调用）。

您之后从 fragment 添加到选项菜单的任何菜单项都将追加到现有菜单项之后。 
选定菜单项时，片段还会收到对 onOptionsItemSelected() 的回调。

您还可以通过调用 registerForContextMenu()，在片段布局中注册一个视图来提供上下文菜单。
用户打开上下文菜单时，片段会收到对 onCreateContextMenu() 的调用。
当用户选择某个菜单项时，片段会收到对 onContextItemSelected() 的调用。
</code></pre>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechatpay.png" alt="光与风与梦 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/03/Filter与Listener/" rel="next" title="Filter与Listener">
                <i class="fa fa-chevron-left"></i> Filter与Listener
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/05/BroadcastReceiver/" rel="prev" title="BroadcastReceiver">
                BroadcastReceiver <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/03/Fragment/"
           data-title="Fragment" data-url="http://jslancer.top/2016/10/03/Fragment/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/icon.jpg"
               alt="光与风与梦" />
          <p class="site-author-name" itemprop="name">光与风与梦</p>
          <p class="site-description motion-element" itemprop="description">年轻时不可止于温室，有梦想时不可止于饥寒。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">27</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#基本-API"><span class="nav-number">1.</span> <span class="nav-text">基本 API</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#子类"><span class="nav-number">2.</span> <span class="nav-text">子类</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">光与风与梦</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"jslancer"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
